unit Unit6;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.OleCtrls, SHDocVw;

type
  TForm6 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    Memo1: TMemo;
    procedure FormCreate(Sender: TObject);
    procedure setQ(num:integer);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure AddBalanceIfCorrect(num: integer);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form6: TForm6;
  q: array[1..10] of string;
  a: array[1..10] of string;
  v: array[1..10] of string;
  ra:string;
  cv:integer;
  ca:string;
  res:boolean;
  cn:integer;

implementation

{$R *.dfm}

uses Unit4;

procedure Tform6.setQ(num:integer);
begin
  cn := num;
  memo1.Lines.Add(q[num]);
  ra := a[num];
  cv := strtoint(v[num]);
end;

procedure TForm6.Button1Click(Sender: TObject);
begin
ca := 'д';
AddBalanceIfCorrect(cn);
end;

procedure TForm6.AddBalanceIfCorrect(num:integer);
var
  filename: string; // переменная для хранения имени файла сообщения
  F: TextFile; // переменная для работы с файлом
  messageText: string; // переменная для хранения текста сообщения из файла

begin
  if ra = ca then
  begin
    unit4.balance := balance + cv;
    Form4.Label1.Caption := 'Счёт: ' + IntToStr(unit4.balance);
    res := true;
  end
  else
  begin
    res := false;

    // Генерируем имя файла сообщения на основе номера вопроса
    filename := 'Answer\' + IntToStr(num) + '.txt';

    // Открываем файл с сообщением и выводим его
//    showmessage(ParamStr(0) + filename);
    AssignFile(F, ExtractFilePath(ParamStr(0)) + filename);
    Reset(F);
    while not eof(F) do
    begin
      ReadLn(F, messageText);
      messageDlg(messageText, mtInformation, [mbOk],0);
    end;
    CloseFile(F);
  end;

  Close;
end;

procedure TForm6.Button2Click(Sender: TObject);
begin
ca := 'н';
AddBalanceIfCorrect(cn);
end;

procedure TForm6.FormCreate(Sender: TObject);
var F:TextFile;
var s:string;
begin
  for var i := 1 to 10 do
    q[i] := '';

  var qind:integer:=1;
  var ind:integer:=1;
  AssignFile(F, ExtractFilePath(ParamStr(0)) + 'Question\1.txt');
  Reset(f);
  while not eof(f) do begin
    readln(f, s);
    if s[1] = '-' then
      q[qind] := q[qind] + s.Substring(1) + ' '
    else begin
      var spl := s.Split([' ']);
      a[ind] := spl[0];
      v[ind] := spl[1];

      qind := qind + 1;
      ind := ind + 1;
    end;
  end;
end;

end.
